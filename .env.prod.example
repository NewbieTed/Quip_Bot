# Production Environment Configuration for Quip Backend with Redis

# Database Configuration
DB_HOST=quip-db
DB_PORT=5432
DB_NAME=quip_prod_db
DB_USER=quip_prod_user
DB_PASSWORD=your_secure_production_database_password_here

# Redis Configuration - REQUIRED IN PRODUCTION
REDIS_ENABLED=true
REDIS_HOST=quip-redis
REDIS_PORT=6379
REDIS_PASSWORD=your_secure_redis_password_here  # REQUIRED - DO NOT LEAVE EMPTY
REDIS_DATABASE=0
REDIS_TIMEOUT=3000
REDIS_CONNECT_TIMEOUT=3000
REDIS_SSL_ENABLED=false  # Set to true if using Redis with SSL

# Redis Connection Pool Configuration - Production Optimized
REDIS_POOL_MAX_ACTIVE=16
REDIS_POOL_MAX_IDLE=8
REDIS_POOL_MIN_IDLE=2
REDIS_POOL_MAX_WAIT=1000

# Cache TTL Configuration - Production Values (in seconds)
CACHE_DEFAULT_TTL=3600000  # 1 hour in milliseconds
CACHE_TTL_TOOL_WHITELIST=7200      # 2 hours
CACHE_TTL_PROBLEM_CATEGORIES=86400 # 24 hours
CACHE_TTL_SERVER_DATA=21600        # 6 hours
CACHE_TTL_MEMBER_DATA=3600         # 1 hour
CACHE_TTL_ASSISTANT_SESSION=7200   # 2 hours
CACHE_TTL_TEMPORARY_DATA=300       # 5 minutes

# Application Redis Settings
APP_REDIS_DEFAULT_TTL=3600
APP_REDIS_HEALTH_INTERVAL=30000

# Retry and Circuit Breaker Configuration - Production Settings
REDIS_RETRY_MAX_ATTEMPTS=5
REDIS_RETRY_DELAY=2000
REDIS_CB_FAILURE_THRESHOLD=10
REDIS_CB_RECOVERY_TIMEOUT=60000

# Service Ports
BACKEND_PORT=8080
FRONTEND_PORT=3000
AGENT_PORT=5001
MCP_SERVER_PORT=8000

# Inter-service URLs for Production
BACKEND_URL=http://quip-backend-app:8080
AGENT_URL=http://quip-agent:5000
MCP_SERVER_URL=http://quip-mcp-server:8000/mcp
MCP_SERVER_URL_QUIPMCPSERVER=http://quip-mcp-server:8000/mcp
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@quip-db:${DB_PORT}/${DB_NAME}

# Production Security Settings
# Add any additional security-related environment variables here

# Monitoring and Logging
# Configure external monitoring services if needed
# PROMETHEUS_ENDPOINT=http://prometheus:9090
# GRAFANA_ENDPOINT=http://grafana:3000

# SSL/TLS Configuration (if applicable)
# SSL_KEYSTORE_PATH=/path/to/keystore
# SSL_KEYSTORE_PASSWORD=your_keystore_password
# SSL_TRUSTSTORE_PATH=/path/to/truststore
# SSL_TRUSTSTORE_PASSWORD=your_truststore_password